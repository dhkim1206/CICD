
on:
  workflow_dispatch:

env: # 새로 추가한 부분
  S3_BUCKET_NAME: longstone
  PROJECT_NAME: Board

jobs:
  build:
    runs-on: ubuntu-latest

    steps:

    # 중략

    ### 새로 추가한 부분 ###
    - name: Make zip file
      run: zip -r ./$GITHUB_SHA.zip .
      shell: bash

    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v1
      with:
          aws-access-key-id: AKIASGQNGYKOFON2ORVP
          aws-secret-access-key: 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
          aws-region: ap-northeast-2
    - name: Upload to S3
      run: aws s3 cp --region ap-northeast-2 ./$GITHUB_SHA.zip s3://$S3_BUCKET_NAME/$PROJECT_NAME/$GITHUB_SHA.zip
